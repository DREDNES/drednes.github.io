{"version":3,"sources":["assets/icons/close.svg","assets/icons/save.svg","assets/icons/delete.svg","ImageView.jsx","Image.jsx","HomeScreen.jsx","App.jsx","index.js"],"names":["module","exports","ImageView","props","source","className","alt","src","style","maxWidth","type","onClick","close","Close","backgroundColor","link","document","createElement","setAttribute","click","download","Save","delete","Delete","Image","open","width","margin","cursor","MainScreen","start","error","role","aria-label","marginTop","padding","App","state","canvas","stream","images","fullScreenPreview","currentImage","window","innerWidth","previewOpen","image","setState","previewDelete","index","indexOf","splice","previewClose","updateDimensions","debounce","err","console","log","gotMedia","video","querySelector","srcObject","URL","createObjectURL","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","mediaDevices","audio","then","catch","this","getTracks","forEach","track","stop","offsetWidth","height","offsetHeight","getContext","drawImage","push","toDataURL","clearCanvas","clearRect","capture","stopVideo","saveCapture","deleteCapture","addEventListener","removeEventListener","viewWidth","settingsSlider","infinite","speed","slidesToShow","length","Math","ceil","slidesToScroll","captureWidth","map","key","renderButtonsSet","zIndex","autoPlay","startVideo","renderSlider","deleteAllImages","React","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.997d6936.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/close.777b93c6.svg\";","module.exports = __webpack_public_path__ + \"static/media/save.c293f3fc.svg\";","module.exports = __webpack_public_path__ + \"static/media/delete.32af59c4.svg\";","import React from 'react';\nimport Close from './assets/icons/close.svg';\nimport Save from './assets/icons/save.svg';\nimport Delete from './assets/icons/delete.svg';\n\nexport default function ImageView(props) {\n  let source = props.source;\n\n  function download() {\n    const link = document.createElement('a');\n    link.setAttribute('href', source);\n    link.setAttribute('download', 'selfie.jpg');\n    link.click();\n  }\n\n  return (\n    <div>\n      <div className=\"ImageView\">\n        <img alt=\"\" src={source} style={{ maxWidth: '600px' }} />\n      </div>\n      <div className=\"closeImageView\">\n        <input alt=\"\" type=\"image\" onClick={() => props.close()} src={Close} />\n      </div>\n      <div className=\"actionsImageView\">\n        <input\n          alt=\"\"\n          type=\"image\"\n          style={{ backgroundColor: '#6fff36' }}\n          onClick={() => download()}\n          src={Save}\n        />\n        <input\n          alt=\"\"\n          type=\"image\"\n          style={{ backgroundColor: '#ff5c36' }}\n          onClick={() => props.delete()}\n          src={Delete}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function Image({ source, open }) {\n  let style = {\n    width: '200px',\n    margin: '10px 5px 0px 5px',\n    cursor: 'pointer'\n  };\n\n  return (\n    <div>\n      <img alt=\"\" src={source} style={style} onClick={() => open(source)} />\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function MainScreen({ start, error }) {\n  return (\n    <div>\n      <h1>Make selfies from your WebCam!</h1>\n      {error ? (\n        <h3>\n          Ooh, i can't get your camera\n          <span role=\"img\" aria-label=\"sad emoji\">\n            &#128542;\n          </span>\n        </h3>\n      ) : (\n        <div>\n          <h3>Click Start and allow access to your camera</h3>\n          <div className=\"Buttons-wrap\" style={{ marginTop: '-1em' }}>\n            <button style={{ padding: '0.3em 0.8em' }} onClick={() => start()}>\n              START\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { debounce } from 'lodash';\nimport ImageView from './ImageView';\nimport Image from './Image';\nimport HomeScreen from './HomeScreen';\nimport './assets/css/App.css';\nimport 'slick-carousel/slick/slick.css';\nimport 'slick-carousel/slick/slick-theme.css';\nimport Slider from 'react-slick';\n\nexport default class App extends React.Component {\n  state = {\n    canvas: false,\n    stream: null,\n    images: [],\n    fullScreenPreview: '',\n    currentImage: '',\n    width: window.innerWidth,\n    error: null\n  };\n\n  startVideo() {\n    const error = err => {\n      console.log(err);\n      this.setState({ error: err });\n    };\n    const gotMedia = stream => {\n      this.setState({ stream });\n      const video = document.querySelector('video');\n      if ('srcObject' in video) {\n        video.srcObject = stream;\n      } else {\n        video.src = window.URL.createObjectURL(stream);\n      }\n    };\n\n    navigator.getUserMedia =\n      navigator.getUserMedia ||\n      navigator.webkitGetUserMedia ||\n      navigator.mozGetUserMedia ||\n      navigator.msGetUserMedia;\n\n    if (typeof navigator.mediaDevices.getUserMedia === 'undefined') {\n      navigator.getUserMedia({ video: true, audio: false }, gotMedia, error);\n    } else {\n      navigator.mediaDevices\n        .getUserMedia({ video: true, audio: false })\n        .then(gotMedia)\n        .catch(error);\n    }\n  }\n\n  stopVideo() {\n    if (this.state.stream) {\n      this.state.stream.getTracks().forEach(track => track.stop());\n    }\n    this.setState({ stream: null });\n  }\n\n  capture() {\n    if (this.state.stream) {\n      const video = document.querySelector('video');\n      const width = video.offsetWidth,\n        height = video.offsetHeight;\n      const canvas = document.querySelector('canvas');\n      canvas.width = width;\n      canvas.height = height;\n      canvas.getContext('2d').drawImage(video, 0, 0, width, height);\n      this.setState({ canvas: true });\n    }\n  }\n\n  saveCapture() {\n    if (this.state.canvas) {\n      let images = this.state.images;\n      images.push(document.querySelector('canvas').toDataURL('image/jpeg'));\n      this.setState({ images });\n      this.setState({ canvas: false });\n      this.clearCanvas();\n    }\n  }\n\n  deleteCapture() {\n    if (this.state.canvas) {\n      this.setState({ canvas: false });\n      this.clearCanvas();\n    }\n  }\n\n  clearCanvas() {\n    const video = document.querySelector('video');\n    const width = video.offsetWidth,\n      height = video.offsetHeight;\n    const canvas = document.querySelector('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    canvas.getContext('2d').clearRect(0, 0, width, height);\n  }\n\n  previewOpen = image => this.setState({ fullScreenPreview: image });\n\n  previewDelete = () => {\n    const index = this.state.images.indexOf(this.state.fullScreenPreview);\n    let images = this.state.images;\n    images.splice(index, 1);\n    this.setState({ images });\n    this.previewClose();\n  };\n\n  previewClose = () => this.setState({ fullScreenPreview: '' });\n\n  deleteAllImages() {\n    this.setState({ images: [] });\n  }\n\n  renderButtonsSet() {\n    if (this.state.stream && !this.state.canvas) {\n      return (\n        <div className=\"Buttons-wrap\">\n          <button onClick={() => this.capture()}>Selfie!</button>\n          <button onClick={() => this.stopVideo()}>Go back</button>\n        </div>\n      );\n    }\n    if (this.state.canvas) {\n      return (\n        <div className=\"Buttons-wrap\">\n          <button onClick={() => this.saveCapture()}>Save</button>\n          <button onClick={() => this.deleteCapture()}>Delete</button>\n        </div>\n      );\n    }\n  }\n\n  updateDimensions = debounce(\n    () => this.setState({ width: window.innerWidth }),\n    200\n  );\n\n  componentDidMount() {\n    window.addEventListener('resize', this.updateDimensions);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateDimensions);\n  }\n\n  renderSlider() {\n    const viewWidth = this.state.width;\n\n    const settingsSlider = {\n      infinite: true,\n      speed: 500,\n      slidesToShow:\n        this.state.images.length < Math.ceil(viewWidth / 250)\n          ? this.state.images.length\n          : Math.ceil(viewWidth / 250),\n      slidesToScroll: 1\n    };\n\n    const captureWidth =\n      this.state.images.length * 230 < viewWidth - 50\n        ? `${this.state.images.length * 230}px`\n        : '95%';\n\n    return (\n      <div className=\"captures\" style={{ width: captureWidth }}>\n        <Slider className=\"slick\" {...settingsSlider}>\n          {this.state.images.map((image, index) => (\n            <Image key={index} source={image} open={this.previewOpen} />\n          ))}\n        </Slider>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        {this.renderButtonsSet()}\n        <header className=\"App-header\">\n          <div className=\"Video-zone\">\n            {this.state.stream ? (\n              <div>\n                <canvas style={{ zIndex: 15 }}></canvas>\n                <video width=\"100%\" autoPlay />\n                <div className=\"boundary\"></div>\n              </div>\n            ) : (\n              <HomeScreen\n                start={() => this.startVideo()}\n                error={this.state.error}\n              />\n            )}\n          </div>\n          {this.renderSlider()}\n          {this.state.fullScreenPreview && (\n            <div>\n              <ImageView\n                source={this.state.fullScreenPreview}\n                close={this.previewClose}\n                delete={this.previewDelete}\n              />\n            </div>\n          )}\n          {this.state.images.length !== 0 && (\n            <button\n              className=\"deleteAllBut\"\n              onClick={() => this.deleteAllImages()}\n            >\n              Delete all selfies\n            </button>\n          )}\n        </header>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}